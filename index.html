<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Circe Nutrition</title>
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Crimson+Pro:wght@300;400;500;600&family=Inter:wght@300;400;500;600&display=swap" rel="stylesheet">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            margin: 0;
            padding: 0;
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
            background: #F7F5F2;
        }
        
        .serif {
            font-family: 'Crimson Pro', serif;
        }
        
        ::-webkit-scrollbar {
            width: 4px;
        }
        
        ::-webkit-scrollbar-track {
            background: transparent;
        }
        
        ::-webkit-scrollbar-thumb {
            background: #4A4845;
            border-radius: 0;
        }

        .loading-spinner {
            border: 1px solid #E8E6E1;
            border-top: 1px solid #252423;
            border-radius: 50%;
            width: 20px;
            height: 20px;
            animation: spin 1s linear infinite;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .fade-in {
            animation: fadeIn 0.6s ease-out;
        }

        .ingredient-tag {
            display: inline-block;
            padding: 6px 12px;
            background: transparent;
            border: 1px solid #D4D0C8;
            font-size: 9px;
            color: #4A4845;
            margin: 3px;
            letter-spacing: 1px;
            text-transform: uppercase;
            font-weight: 500;
        }

        .divider {
            height: 1px;
            background: #D4D0C8;
            margin: 24px 0;
        }

        .logo-container {
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .logo-mark {
            width: 36px;
            height: 36px;
            border: 2px solid #252423;
            display: flex;
            align-items: center;
            justify-content: center;
            position: relative;
        }

        .logo-mark::before {
            content: '';
            position: absolute;
            width: 16px;
            height: 20px;
            border: 1px solid #252423;
            border-radius: 50% 0;
            transform: rotate(-45deg);
        }

        .logo-text {
            font-family: 'Crimson Pro', serif;
            font-size: 22px;
            font-weight: 500;
            color: #252423;
            letter-spacing: 1px;
        }

        button {
            transition: all 0.2s ease;
        }

        button:active {
            transform: translateY(1px);
        }
    </style>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        aesop: {
                            cream: '#F7F5F2',
                            sand: '#E8E6E1',
                            stone: '#D4D0C8',
                            taupe: '#A8A49D',
                            brown: '#6B6760',
                            charcoal: '#4A4845',
                            black: '#252423',
                        },
                        accent: {
                            olive: '#8B8B70',
                            sage: '#9C9B8E',
                        }
                    },
                    fontFamily: {
                        sans: ['Inter', 'sans-serif'],
                        serif: ['Crimson Pro', 'serif'],
                    }
                }
            }
        }
    </script>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect } = React;

        // Professional Icons from Lucide
        const Home = () => (
            <svg width="20" height="20" fill="none" stroke="currentColor" strokeWidth="1.5" strokeLinecap="round" strokeLinejoin="round">
                <path d="M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"/>
                <polyline points="9 22 9 12 15 12 15 22"/>
            </svg>
        );

        const Search = () => (
            <svg width="20" height="20" fill="none" stroke="currentColor" strokeWidth="1.5" strokeLinecap="round" strokeLinejoin="round">
                <circle cx="11" cy="11" r="8"/>
                <path d="m21 21-4.35-4.35"/>
            </svg>
        );

        const BarChart = () => (
            <svg width="20" height="20" fill="none" stroke="currentColor" strokeWidth="1.5" strokeLinecap="round" strokeLinejoin="round">
                <line x1="12" y1="20" x2="12" y2="10"/>
                <line x1="18" y1="20" x2="18" y2="4"/>
                <line x1="6" y1="20" x2="6" y2="16"/>
            </svg>
        );

        const Sparkles = () => (
            <svg width="20" height="20" fill="none" stroke="currentColor" strokeWidth="1.5" strokeLinecap="round" strokeLinejoin="round">
                <path d="m12 3-1.912 5.813a2 2 0 0 1-1.275 1.275L3 12l5.813 1.912a2 2 0 0 1 1.275 1.275L12 21l1.912-5.813a2 2 0 0 1 1.275-1.275L21 12l-5.813-1.912a2 2 0 0 1-1.275-1.275L12 3Z"/>
            </svg>
        );

        const ChevronRight = () => (
            <svg width="18" height="18" fill="none" stroke="currentColor" strokeWidth="1.5" strokeLinecap="round" strokeLinejoin="round">
                <polyline points="9 18 15 12 9 6"/>
            </svg>
        );

        const ChevronLeft = () => (
            <svg width="20" height="20" fill="none" stroke="currentColor" strokeWidth="1.5" strokeLinecap="round" strokeLinejoin="round">
                <polyline points="15 18 9 12 15 6"/>
            </svg>
        );

        const X = () => (
            <svg width="20" height="20" fill="none" stroke="currentColor" strokeWidth="1.5" strokeLinecap="round" strokeLinejoin="round">
                <line x1="18" y1="6" x2="6" y2="18"/>
                <line x1="6" y1="6" x2="18" y2="18"/>
            </svg>
        );

        const Plus = () => (
            <svg width="18" height="18" fill="none" stroke="currentColor" strokeWidth="1.5" strokeLinecap="round" strokeLinejoin="round">
                <line x1="12" y1="5" x2="12" y2="19"/>
                <line x1="5" y1="12" x2="19" y2="12"/>
            </svg>
        );

        const Moon = () => (
            <svg width="28" height="28" fill="none" stroke="currentColor" strokeWidth="1.5" strokeLinecap="round" strokeLinejoin="round">
                <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"/>
            </svg>
        );

        const Activity = () => (
            <svg width="20" height="20" fill="none" stroke="currentColor" strokeWidth="1.5" strokeLinecap="round" strokeLinejoin="round">
                <polyline points="22 12 18 12 15 21 9 3 6 12 2 12"/>
            </svg>
        );

        const Heart = () => (
            <svg width="20" height="20" fill="none" stroke="currentColor" strokeWidth="1.5" strokeLinecap="round" strokeLinejoin="round">
                <path d="M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z"/>
            </svg>
        );

        const Watch = () => (
            <svg width="20" height="20" fill="none" stroke="currentColor" strokeWidth="1.5" strokeLinecap="round" strokeLinejoin="round">
                <circle cx="12" cy="12" r="7"/>
                <polyline points="12 9 12 12 13.5 13.5"/>
                <path d="M16.51 17.35l-.35 3.83a2 2 0 0 1-2 1.82H9.83a2 2 0 0 1-2-1.82l-.35-3.83m.01-10.7l.35-3.83A2 2 0 0 1 9.83 1h4.35a2 2 0 0 1 2 1.82l.35 3.83"/>
            </svg>
        );

        const Utensils = () => (
            <svg width="20" height="20" fill="none" stroke="currentColor" strokeWidth="1.5" strokeLinecap="round" strokeLinejoin="round">
                <path d="M3 2v7c0 1.1.9 2 2 2h4a2 2 0 0 0 2-2V2"/>
                <path d="M7 2v20"/>
                <path d="M21 15V2v0a5 5 0 0 0-5 5v6c0 1.1.9 2 2 2h3Zm0 0v7"/>
            </svg>
        );

        const TrendingUp = () => (
            <svg width="20" height="20" fill="none" stroke="currentColor" strokeWidth="1.5" strokeLinecap="round" strokeLinejoin="round">
                <polyline points="23 6 13.5 15.5 8.5 10.5 1 18"/>
                <polyline points="17 6 23 6 23 12"/>
            </svg>
        );

        const Calendar = () => (
            <svg width="20" height="20" fill="none" stroke="currentColor" strokeWidth="1.5" strokeLinecap="round" strokeLinejoin="round">
                <rect x="3" y="4" width="18" height="18" rx="2" ry="2"/>
                <line x1="16" y1="2" x2="16" y2="6"/>
                <line x1="8" y1="2" x2="8" y2="6"/>
                <line x1="3" y1="10" x2="21" y2="10"/>
            </svg>
        );

        const Lock = () => (
            <svg width="20" height="20" fill="none" stroke="currentColor" strokeWidth="1.5" strokeLinecap="round" strokeLinejoin="round">
                <rect x="3" y="11" width="18" height="11" rx="2" ry="2"/>
                <path d="M7 11V7a5 5 0 0 1 10 0v4"/>
            </svg>
        );

        // Logo Component
        const Logo = ({ size = 'normal' }) => {
            const scale = size === 'large' ? 1.8 : 1;
            return (
                <div className="logo-container" style={{ transform: `scale(${scale})` }}>
                    <div className="logo-mark"></div>
                    <div className="logo-text">CIRCE</div>
                </div>
            );
        };

        // Restaurant Menu Database
        const RESTAURANT_MENUS = {
            'Sweetgreen': {
                cuisine: 'Salads & Bowls',
                description: 'Farm-to-table salads and warm bowls',
                doordashId: 'sweetgreen',
                items: [
                    {
                        name: 'Harvest Bowl',
                        price: 13.95,
                        calories: 520,
                        protein: 18,
                        carbs: 68,
                        fat: 20,
                        fiber: 12,
                        sugar: 15,
                        sodium: 680,
                        ingredients: ['Warm quinoa', 'Roasted chicken', 'Roasted sweet potato', 'Apples', 'Goat cheese', 'Almonds', 'Balsamic vinaigrette'],
                        allergens: ['Dairy', 'Tree Nuts'],
                        healthScore: 88,
                        recommended: true,
                        category: 'Warm Bowls'
                    },
                    {
                        name: 'Kale Caesar',
                        price: 11.95,
                        calories: 480,
                        protein: 22,
                        carbs: 42,
                        fat: 24,
                        fiber: 8,
                        sugar: 6,
                        sodium: 890,
                        ingredients: ['Kale', 'Shaved parmesan', 'Sourdough breadcrumbs', 'Lime squeeze', 'Caesar dressing'],
                        allergens: ['Dairy', 'Gluten'],
                        healthScore: 75,
                        recommended: false,
                        category: 'Salads'
                    },
                    {
                        name: 'Fish Taco Bowl',
                        price: 14.95,
                        calories: 590,
                        protein: 32,
                        carbs: 55,
                        fat: 26,
                        fiber: 10,
                        sugar: 8,
                        sodium: 750,
                        ingredients: ['Blackened fish', 'Cilantro lime rice', 'Cabbage', 'Pickled onions', 'Avocado', 'Lime cilantro jalapeño vinaigrette'],
                        allergens: ['Fish'],
                        healthScore: 82,
                        recommended: true,
                        category: 'Warm Bowls'
                    }
                ]
            },
            'CAVA': {
                cuisine: 'Mediterranean',
                description: 'Mediterranean bowls and pitas',
                doordashId: 'cava',
                items: [
                    {
                        name: 'Crazy Feta Bowl',
                        price: 12.50,
                        calories: 640,
                        protein: 28,
                        carbs: 62,
                        fat: 30,
                        fiber: 11,
                        sugar: 10,
                        sodium: 920,
                        ingredients: ['Greens', 'Brown rice', 'Grilled chicken', 'Hummus', 'Feta', 'Cucumber', 'Tomato', 'Crazy feta dressing'],
                        allergens: ['Dairy', 'Sesame'],
                        healthScore: 84,
                        recommended: true,
                        category: 'Bowls'
                    },
                    {
                        name: 'Spicy Lamb Meatballs Bowl',
                        price: 13.95,
                        calories: 720,
                        protein: 35,
                        carbs: 58,
                        fat: 38,
                        fiber: 9,
                        sugar: 11,
                        sodium: 1050,
                        ingredients: ['Saffron basmati rice', 'Lamb meatballs', 'Harissa', 'Hummus', 'Pickled onions', 'Cucumber', 'Tomato'],
                        allergens: ['Sesame'],
                        healthScore: 76,
                        recommended: false,
                        category: 'Bowls'
                    }
                ]
            },
            'Chipotle': {
                cuisine: 'Mexican',
                description: 'Fresh Mexican-inspired bowls and burritos',
                doordashId: 'chipotle',
                items: [
                    {
                        name: 'Chicken Bowl',
                        price: 10.95,
                        calories: 630,
                        protein: 48,
                        carbs: 52,
                        fat: 24,
                        fiber: 14,
                        sugar: 6,
                        sodium: 1420,
                        ingredients: ['Brown rice', 'Chicken', 'Black beans', 'Fajita veggies', 'Tomato salsa', 'Lettuce'],
                        allergens: [],
                        healthScore: 80,
                        recommended: true,
                        category: 'Bowls'
                    },
                    {
                        name: 'Steak Burrito Bowl',
                        price: 12.95,
                        calories: 710,
                        protein: 42,
                        carbs: 68,
                        fat: 28,
                        fiber: 16,
                        sugar: 7,
                        sodium: 1580,
                        ingredients: ['Cilantro-lime rice', 'Steak', 'Pinto beans', 'Cheese', 'Sour cream', 'Guacamole'],
                        allergens: ['Dairy'],
                        healthScore: 72,
                        recommended: false,
                        category: 'Bowls'
                    }
                ]
            },
            'Tender Greens': {
                cuisine: 'Farm-to-table',
                description: 'Seasonal plates and salads',
                doordashId: 'tender-greens',
                items: [
                    {
                        name: 'Backyard Steak Salad',
                        price: 15.95,
                        calories: 580,
                        protein: 38,
                        carbs: 32,
                        fat: 32,
                        fiber: 8,
                        sugar: 12,
                        sodium: 820,
                        ingredients: ['Mixed greens', 'Grilled steak', 'Tomatoes', 'Corn', 'Cotija cheese', 'Avocado', 'Chipotle vinaigrette'],
                        allergens: ['Dairy'],
                        healthScore: 85,
                        recommended: true,
                        category: 'Salads'
                    },
                    {
                        name: 'Salt & Pepper Chicken Plate',
                        price: 14.50,
                        calories: 620,
                        protein: 45,
                        carbs: 48,
                        fat: 26,
                        fiber: 6,
                        sugar: 8,
                        sodium: 980,
                        ingredients: ['Grilled chicken', 'Quinoa', 'Roasted vegetables', 'Herb sauce'],
                        allergens: [],
                        healthScore: 87,
                        recommended: true,
                        category: 'Plates'
                    }
                ]
            }
        };

        // Main App Component
        function CirceNutritionApp() {
            const [currentScreen, setCurrentScreen] = useState('splash');
            const [userProfile, setUserProfile] = useState({});
            const [surveyStep, setSurveyStep] = useState(0);
            const [location, setLocation] = useState(null);
            const [selectedRestaurant, setSelectedRestaurant] = useState(null);
            const [selectedMeal, setSelectedMeal] = useState(null);
            const [expandedMeal, setExpandedMeal] = useState(null);
            const [trackedMeals, setTrackedMeals] = useState([]);
            const [dailyStats, setDailyStats] = useState({
                calories: 0,
                protein: 0,
                carbs: 0,
                fat: 0,
                target: { calories: 1800, protein: 120, carbs: 180, fat: 60 }
            });

            // Get user's location
            const getUserLocation = () => {
                if (navigator.geolocation) {
                    navigator.geolocation.getCurrentPosition(
                        (position) => {
                            const loc = {
                                lat: position.coords.latitude,
                                lng: position.coords.longitude,
                                city: 'Your Area'
                            };
                            setLocation(loc);
                            setCurrentScreen('onboarding');
                        },
                        (error) => {
                            setLocation({ lat: 37.7749, lng: -122.4194, city: 'San Francisco' });
                            setCurrentScreen('onboarding');
                        }
                    );
                } else {
                    setLocation({ lat: 37.7749, lng: -122.4194, city: 'San Francisco' });
                    setCurrentScreen('onboarding');
                }
            };

            const openDoorDash = (restaurantName, itemName) => {
                const restaurant = RESTAURANT_MENUS[restaurantName];
                if (restaurant && restaurant.doordashId) {
                    const doordashUrl = `https://www.doordash.com/store/${restaurant.doordashId}`;
                    window.open(doordashUrl, '_blank');
                }
            };

            // Onboarding Survey Questions
            const surveyQuestions = [
                {
                    question: "What is your primary health objective?",
                    options: [
                        { label: 'Hormonal balance', value: 'hormones' },
                        { label: 'Energy optimization', value: 'energy' },
                        { label: 'Weight management', value: 'weight' },
                        { label: 'Athletic performance', value: 'performance' },
                        { label: 'General wellness', value: 'wellness' }
                    ],
                    field: 'healthGoal'
                },
                {
                    question: "Do you have any diagnosed health conditions?",
                    options: [
                        { label: 'PCOS', value: 'pcos' },
                        { label: 'Endometriosis', value: 'endo' },
                        { label: 'Thyroid condition', value: 'thyroid' },
                        { label: 'Insulin resistance', value: 'insulin' },
                        { label: 'None', value: 'none' }
                    ],
                    field: 'conditions',
                    multiple: true
                },
                {
                    question: "What is your current activity level?",
                    options: [
                        { label: 'Sedentary', value: 'sedentary' },
                        { label: 'Light activity', value: 'light' },
                        { label: 'Moderate activity', value: 'moderate' },
                        { label: 'Active', value: 'active' },
                        { label: 'Very active', value: 'very_active' }
                    ],
                    field: 'activityLevel'
                },
                {
                    question: "Do you have dietary preferences or restrictions?",
                    options: [
                        { label: 'No restrictions', value: 'none' },
                        { label: 'Vegetarian', value: 'vegetarian' },
                        { label: 'Vegan', value: 'vegan' },
                        { label: 'Gluten-free', value: 'gluten_free' },
                        { label: 'Dairy-free', value: 'dairy_free' }
                    ],
                    field: 'dietPreferences',
                    multiple: true
                },
                {
                    question: "Would you like cycle-synced nutrition tracking?",
                    options: [
                        { label: 'Yes, enable this feature', value: 'yes' },
                        { label: 'No, skip this feature', value: 'no' }
                    ],
                    field: 'cycleTracking'
                }
            ];

            const handleSurveyAnswer = (field, value, multiple = false) => {
                if (multiple) {
                    const current = userProfile[field] || [];
                    const updated = current.includes(value)
                        ? current.filter(v => v !== value)
                        : [...current, value];
                    setUserProfile({ ...userProfile, [field]: updated });
                } else {
                    setUserProfile({ ...userProfile, [field]: value });
                }
            };

            const nextSurveyStep = () => {
                if (surveyStep < surveyQuestions.length - 1) {
                    setSurveyStep(surveyStep + 1);
                } else {
                    setCurrentScreen('wearable');
                }
            };

            const skipToHome = () => {
                setCurrentScreen('home');
            };

            // Update daily stats when meals are tracked
            useEffect(() => {
                const stats = trackedMeals.reduce((acc, meal) => ({
                    calories: acc.calories + meal.calories,
                    protein: acc.protein + meal.protein,
                    carbs: acc.carbs + meal.carbs,
                    fat: acc.fat + meal.fat
                }), { calories: 0, protein: 0, carbs: 0, fat: 0 });
                
                setDailyStats({ ...dailyStats, ...stats });
            }, [trackedMeals]);

            // Splash Screen
            const SplashScreen = () => (
                <div className="min-h-screen bg-aesop-cream flex flex-col items-center justify-center p-8">
                    <div className="text-center space-y-12 max-w-md mx-auto fade-in">
                        <div className="flex justify-center mb-8">
                            <Logo size="large" />
                        </div>
                        <p className="text-aesop-brown text-xs tracking-widest uppercase" style={{ letterSpacing: '3px', fontWeight: '400' }}>
                            Eat Well, Your Way
                        </p>
                        <button
                            onClick={getUserLocation}
                            className="w-full bg-aesop-black text-white py-4 px-8 text-xs uppercase tracking-widest hover:bg-aesop-charcoal transition-all border border-aesop-black"
                            style={{ letterSpacing: '3px', fontWeight: '500' }}
                        >
                            Begin
                        </button>
                        <p className="text-xs text-aesop-taupe tracking-widest uppercase" style={{ letterSpacing: '2px' }}>
                            Personalized · Flexible · Precise
                        </p>
                    </div>
                </div>
            );

            // Onboarding Survey Screen
            const OnboardingScreen = () => {
                const currentQuestion = surveyQuestions[surveyStep];
                const progress = ((surveyStep + 1) / surveyQuestions.length) * 100;

                return (
                    <div className="min-h-screen bg-aesop-cream pb-24">
                        <div className="max-w-2xl mx-auto p-8">
                            {/* Progress Bar */}
                            <div className="mb-12">
                                <div className="flex justify-between items-center mb-3">
                                    <span className="text-xs text-aesop-charcoal tracking-widest uppercase" style={{ letterSpacing: '2px', fontWeight: '500' }}>
                                        Question {surveyStep + 1} of {surveyQuestions.length}
                                    </span>
                                    <span className="text-xs text-aesop-black tracking-widest uppercase" style={{ letterSpacing: '2px', fontWeight: '600' }}>
                                        {Math.round(progress)}%
                                    </span>
                                </div>
                                <div className="h-px bg-aesop-stone overflow-hidden">
                                    <div 
                                        className="h-full bg-aesop-black transition-all duration-700"
                                        style={{ width: `${progress}%` }}
                                    />
                                </div>
                            </div>

                            {/* Question */}
                            <div className="bg-white border border-aesop-sand p-10 mb-8">
                                <h2 className="text-2xl font-serif text-aesop-black mb-10 tracking-tight leading-tight" style={{ lineHeight: '1.3' }}>
                                    {currentQuestion.question}
                                </h2>
                                
                                <div className="space-y-2">
                                    {currentQuestion.options.map((option, idx) => {
                                        const isSelected = currentQuestion.multiple
                                            ? (userProfile[currentQuestion.field] || []).includes(option.value)
                                            : userProfile[currentQuestion.field] === option.value;
                                        
                                        return (
                                            <button
                                                key={idx}
                                                onClick={() => handleSurveyAnswer(
                                                    currentQuestion.field, 
                                                    option.value, 
                                                    currentQuestion.multiple
                                                )}
                                                className={`w-full p-4 border text-left transition-all ${
                                                    isSelected
                                                        ? 'border-aesop-black bg-aesop-black text-white'
                                                        : 'border-aesop-stone bg-white text-aesop-charcoal hover:border-aesop-charcoal'
                                                }`}
                                            >
                                                <div className="flex items-center justify-between">
                                                    <span className="text-xs tracking-widest uppercase" style={{ letterSpacing: '1.5px', fontWeight: '400' }}>
                                                        {option.label}
                                                    </span>
                                                    {isSelected && (
                                                        <span className="text-white text-sm">✓</span>
                                                    )}
                                                </div>
                                            </button>
                                        );
                                    })}
                                </div>
                            </div>

                            {/* Navigation */}
                            <div className="flex gap-4">
                                {surveyStep > 0 && (
                                    <button
                                        onClick={() => setSurveyStep(surveyStep - 1)}
                                        className="px-8 py-4 border border-aesop-stone text-aesop-charcoal text-xs uppercase tracking-widest hover:border-aesop-black"
                                        style={{ letterSpacing: '2px', fontWeight: '500' }}
                                    >
                                        Back
                                    </button>
                                )}
                                <button
                                    onClick={nextSurveyStep}
                                    disabled={!userProfile[currentQuestion.field]}
                                    className="flex-1 bg-aesop-black text-white py-4 px-8 text-xs uppercase tracking-widest hover:bg-aesop-charcoal disabled:opacity-30 disabled:cursor-not-allowed transition-all"
                                    style={{ letterSpacing: '2px', fontWeight: '500' }}
                                >
                                    {surveyStep < surveyQuestions.length - 1 ? 'Continue' : 'Complete'}
                                </button>
                            </div>
                        </div>
                    </div>
                );
            };

            // Wearable Connection Screen
            const WearableScreen = () => (
                <div className="min-h-screen bg-aesop-cream p-8 pb-24">
                    <div className="max-w-2xl mx-auto">
                        <button
                            onClick={() => setCurrentScreen('onboarding')}
                            className="mb-8 text-aesop-charcoal hover:text-aesop-black"
                        >
                            <ChevronLeft />
                        </button>

                        <div className="mb-12">
                            <div className="mb-6">
                                <Watch />
                            </div>
                            <h2 className="text-3xl font-serif text-aesop-black mb-4 tracking-tight">
                                Device Integration
                            </h2>
                            <p className="text-aesop-brown text-sm tracking-wide leading-relaxed" style={{ letterSpacing: '0.3px' }}>
                                Connect wearable devices to enable personalized, data-driven nutrition recommendations.
                            </p>
                        </div>

                        <div className="space-y-3 mb-10">
                            {/* Oura Ring */}
                            <div className="bg-white border border-aesop-sand p-6">
                                <div className="flex items-center justify-between">
                                    <div className="flex items-center gap-5">
                                        <div className="w-12 h-12 border border-aesop-black flex items-center justify-center">
                                            <Activity />
                                        </div>
                                        <div>
                                            <h3 className="text-xs tracking-widest text-aesop-black uppercase mb-1" style={{ letterSpacing: '1.5px', fontWeight: '600' }}>
                                                Oura Ring
                                            </h3>
                                            <p className="text-xs text-aesop-taupe tracking-wide" style={{ letterSpacing: '0.5px' }}>
                                                Sleep, HRV, cycle data
                                            </p>
                                        </div>
                                    </div>
                                    <button
                                        onClick={skipToHome}
                                        className="px-6 py-3 bg-aesop-black text-white text-xs uppercase tracking-widest"
                                        style={{ letterSpacing: '1.5px', fontWeight: '500' }}
                                    >
                                        Connect
                                    </button>
                                </div>
                            </div>

                            {/* Apple Health */}
                            <div className="bg-white border border-aesop-sand p-6">
                                <div className="flex items-center justify-between">
                                    <div className="flex items-center gap-5">
                                        <div className="w-12 h-12 border border-aesop-stone flex items-center justify-center">
                                            <Heart />
                                        </div>
                                        <div>
                                            <h3 className="text-xs tracking-widest text-aesop-black uppercase mb-1" style={{ letterSpacing: '1.5px', fontWeight: '600' }}>
                                                Apple Health
                                            </h3>
                                            <p className="text-xs text-aesop-taupe tracking-wide" style={{ letterSpacing: '0.5px' }}>
                                                Activity, workouts, vitals
                                            </p>
                                        </div>
                                    </div>
                                    <button className="px-6 py-3 border border-aesop-stone text-aesop-charcoal text-xs uppercase tracking-widest hover:border-aesop-black" style={{ letterSpacing: '1.5px', fontWeight: '500' }}>
                                        Connect
                                    </button>
                                </div>
                            </div>

                            {/* Whoop */}
                            <div className="bg-white border border-aesop-sand p-6">
                                <div className="flex items-center justify-between">
                                    <div className="flex items-center gap-5">
                                        <div className="w-12 h-12 border border-aesop-stone flex items-center justify-center">
                                            <TrendingUp />
                                        </div>
                                        <div>
                                            <h3 className="text-xs tracking-widest text-aesop-black uppercase mb-1" style={{ letterSpacing: '1.5px', fontWeight: '600' }}>
                                                Whoop
                                            </h3>
                                            <p className="text-xs text-aesop-taupe tracking-wide" style={{ letterSpacing: '0.5px' }}>
                                                Recovery, strain, sleep
                                            </p>
                                        </div>
                                    </div>
                                    <button className="px-6 py-3 border border-aesop-stone text-aesop-charcoal text-xs uppercase tracking-widest hover:border-aesop-black" style={{ letterSpacing: '1.5px', fontWeight: '500' }}>
                                        Connect
                                    </button>
                                </div>
                            </div>
                        </div>

                        {/* Privacy Notice */}
                        <div className="bg-aesop-sand border border-aesop-stone p-6 mb-8">
                            <div className="flex gap-4">
                                <div className="flex-shrink-0">
                                    <Lock />
                                </div>
                                <div>
                                    <h4 className="text-aesop-black text-xs mb-2 uppercase tracking-widest" style={{ letterSpacing: '1.5px', fontWeight: '600' }}>
                                        Privacy & Security
                                    </h4>
                                    <p className="text-xs text-aesop-brown leading-relaxed tracking-wide" style={{ letterSpacing: '0.3px' }}>
                                        All health data is encrypted end-to-end and never shared with third parties. 
                                        You maintain complete control and can disconnect at any time.
                                    </p>
                                </div>
                            </div>
                        </div>

                        <button
                            onClick={skipToHome}
                            className="w-full py-4 text-aesop-taupe text-xs uppercase tracking-widest hover:text-aesop-black"
                            style={{ letterSpacing: '2px' }}
                        >
                            Skip for now
                        </button>
                    </div>
                </div>
            );

            // Home Dashboard Screen
            const HomeScreen = () => (
                <div className="min-h-screen bg-aesop-cream pb-24">
                    <div className="max-w-2xl mx-auto">
                        {/* Header */}
                        <div className="bg-aesop-black text-white p-8 border-b border-aesop-charcoal">
                            <div className="flex justify-between items-start mb-8">
                                <div>
                                    <p className="text-aesop-stone text-xs tracking-widest uppercase mb-2" style={{ letterSpacing: '2px' }}>
                                        Good Morning
                                    </p>
                                    <h1 className="text-2xl font-serif tracking-tight">Today's Plan</h1>
                                </div>
                                <Logo />
                            </div>

                            {/* Quick Stats */}
                            <div className="grid grid-cols-4 gap-3">
                                <div className="border border-aesop-charcoal bg-aesop-black p-4 text-center">
                                    <div className="text-xl font-serif mb-1">
                                        {dailyStats.calories}
                                    </div>
                                    <div className="text-xs text-aesop-stone tracking-widest uppercase" style={{ letterSpacing: '1px' }}>
                                        kcal
                                    </div>
                                    <div className="text-xs text-aesop-taupe mt-1">
                                        / {dailyStats.target.calories}
                                    </div>
                                </div>
                                <div className="border border-aesop-charcoal bg-aesop-black p-4 text-center">
                                    <div className="text-xl font-serif mb-1">
                                        {dailyStats.protein}
                                    </div>
                                    <div className="text-xs text-aesop-stone tracking-widest uppercase" style={{ letterSpacing: '1px' }}>
                                        protein
                                    </div>
                                </div>
                                <div className="border border-aesop-charcoal bg-aesop-black p-4 text-center">
                                    <div className="text-xl font-serif mb-1">
                                        {dailyStats.carbs}
                                    </div>
                                    <div className="text-xs text-aesop-stone tracking-widest uppercase" style={{ letterSpacing: '1px' }}>
                                        carbs
                                    </div>
                                </div>
                                <div className="border border-aesop-charcoal bg-aesop-black p-4 text-center">
                                    <div className="text-xl font-serif mb-1">
                                        {dailyStats.fat}
                                    </div>
                                    <div className="text-xs text-aesop-stone tracking-widest uppercase" style={{ letterSpacing: '1px' }}>
                                        fat
                                    </div>
                                </div>
                            </div>
                        </div>

                        {/* Today's Insights */}
                        <div className="p-8 space-y-4">
                            <h2 className="text-lg font-serif text-aesop-black mb-6 tracking-tight">Today's Insights</h2>
                            
                            {/* Cycle Phase Insight */}
                            <div className="bg-white border border-aesop-sand p-6">
                                <div className="flex items-start gap-4 mb-4">
                                    <div className="flex-shrink-0">
                                        <Calendar />
                                    </div>
                                    <div className="flex-1">
                                        <h3 className="text-xs tracking-widest uppercase text-aesop-black mb-2" style={{ letterSpacing: '1.5px', fontWeight: '600' }}>
                                            Follicular Phase · Day 8
                                        </h3>
                                        <p className="text-xs text-aesop-brown leading-relaxed tracking-wide" style={{ letterSpacing: '0.3px' }}>
                                            Energy levels are naturally elevated. Optimal time for protein-rich meals 
                                            and higher-intensity physical activity.
                                        </p>
                                    </div>
                                </div>
                                <div className="flex gap-2 text-xs">
                                    <span className="px-3 py-2 border border-aesop-stone text-aesop-charcoal tracking-widest uppercase" style={{ letterSpacing: '1px' }}>
                                        High Energy
                                    </span>
                                    <span className="px-3 py-2 border border-aesop-stone text-aesop-charcoal tracking-widest uppercase" style={{ letterSpacing: '1px' }}>
                                        Fast Metabolism
                                    </span>
                                </div>
                            </div>

                            {/* Sleep Recovery */}
                            <div className="bg-white border border-aesop-sand p-6">
                                <div className="flex items-center justify-between mb-4">
                                    <div className="flex items-center gap-3">
                                        <Activity />
                                        <h3 className="text-xs tracking-widest uppercase text-aesop-black" style={{ letterSpacing: '1.5px', fontWeight: '600' }}>
                                            Sleep Score
                                        </h3>
                                    </div>
                                    <span className="text-xl font-serif text-aesop-black">82</span>
                                </div>
                                <p className="text-xs text-aesop-brown mb-4 tracking-wide leading-relaxed" style={{ letterSpacing: '0.3px' }}>
                                    Recovery is optimal. Body is prepared for balanced nutritional intake.
                                </p>
                                <div className="h-px bg-aesop-sand overflow-hidden">
                                    <div className="h-full bg-accent-olive" style={{ width: '82%' }} />
                                </div>
                            </div>

                            {/* HRV & Readiness */}
                            <div className="bg-white border border-aesop-sand p-6">
                                <div className="flex items-center gap-3 mb-3">
                                    <TrendingUp />
                                    <div className="flex-1">
                                        <h3 className="text-xs tracking-widest uppercase text-aesop-black mb-2" style={{ letterSpacing: '1.5px', fontWeight: '600' }}>
                                            Readiness: 85%
                                        </h3>
                                        <p className="text-xs text-aesop-taupe tracking-wide" style={{ letterSpacing: '0.5px' }}>
                                            HRV: 68ms · Resting HR: 58 bpm
                                        </p>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div className="divider mx-8"></div>

                        {/* Meal Recommendations */}
                        <div className="p-8">
                            <div className="flex justify-between items-center mb-6">
                                <h2 className="text-lg font-serif text-aesop-black tracking-tight">
                                    Recommended
                                </h2>
                                <button 
                                    onClick={() => setCurrentScreen('restaurants')}
                                    className="text-aesop-charcoal text-xs uppercase tracking-widest hover:text-aesop-black"
                                    style={{ letterSpacing: '1.5px', fontWeight: '500' }}
                                >
                                    View All
                                </button>
                            </div>

                            <div className="space-y-3">
                                {Object.keys(RESTAURANT_MENUS).slice(0, 3).map(restName => {
                                    const restaurant = RESTAURANT_MENUS[restName];
                                    const topMeal = restaurant.items.find(item => item.recommended) || restaurant.items[0];
                                    
                                    return (
                                        <div 
                                            key={restName}
                                            onClick={() => {
                                                setSelectedRestaurant({ name: restName, ...restaurant });
                                                setCurrentScreen('restaurant');
                                            }}
                                            className="bg-white border border-aesop-sand p-5 hover:border-aesop-charcoal transition-all cursor-pointer"
                                        >
                                            <div className="flex items-center gap-5">
                                                <div className="w-16 h-16 border border-aesop-sand flex items-center justify-center flex-shrink-0">
                                                    <Utensils />
                                                </div>
                                                <div className="flex-1">
                                                    <h3 className="text-xs tracking-widest uppercase text-aesop-black mb-2" style={{ letterSpacing: '1.5px', fontWeight: '600' }}>
                                                        {restName}
                                                    </h3>
                                                    <p className="text-xs text-aesop-taupe mb-3 tracking-wide" style={{ letterSpacing: '0.3px' }}>
                                                        {topMeal.name} · {topMeal.calories} cal
                                                    </p>
                                                    <div className="flex items-center gap-2 text-xs">
                                                        <span className="px-2 py-1 border border-aesop-stone text-aesop-charcoal tracking-widest uppercase" style={{ letterSpacing: '0.5px', fontSize: '9px' }}>
                                                            Score {topMeal.healthScore}
                                                        </span>
                                                        {topMeal.recommended && (
                                                            <span className="text-aesop-charcoal tracking-widest uppercase" style={{ letterSpacing: '0.5px', fontSize: '9px' }}>
                                                                · Recommended
                                                            </span>
                                                        )}
                                                    </div>
                                                </div>
                                                <ChevronRight />
                                            </div>
                                        </div>
                                    );
                                })}
                            </div>
                        </div>
                    </div>
                </div>
            );

            // Restaurant List Screen
            const RestaurantsScreen = () => (
                <div className="min-h-screen bg-aesop-cream pb-24">
                    <div className="max-w-2xl mx-auto">
                        {/* Header */}
                        <div className="bg-white border-b border-aesop-sand p-8">
                            <div className="flex items-center gap-5 mb-6">
                                <button 
                                    onClick={() => setCurrentScreen('home')}
                                    className="text-aesop-charcoal hover:text-aesop-black"
                                >
                                    <ChevronLeft />
                                </button>
                                <div className="flex-1">
                                    <h1 className="text-2xl font-serif text-aesop-black tracking-tight mb-1">
                                        Restaurants
                                    </h1>
                                    <p className="text-xs text-aesop-taupe tracking-wide" style={{ letterSpacing: '0.5px' }}>
                                        {location ? location.city : 'Your Area'}
                                    </p>
                                </div>
                            </div>
                            
                            {/* Search Bar */}
                            <div className="relative">
                                <input
                                    type="text"
                                    placeholder="Search restaurants or dishes..."
                                    className="w-full pl-12 pr-4 py-4 bg-aesop-cream border border-aesop-sand text-xs focus:outline-none focus:border-aesop-charcoal tracking-wide"
                                    style={{ letterSpacing: '0.5px' }}
                                />
                                <div className="absolute left-4 top-4 text-aesop-taupe">
                                    <Search />
                                </div>
                            </div>
                        </div>

                        {/* Restaurant List */}
                        <div className="p-8 space-y-4">
                            {Object.keys(RESTAURANT_MENUS).map(restName => {
                                const restaurant = RESTAURANT_MENUS[restName];
                                const matchScore = Math.floor(Math.random() * 20) + 80;
                                
                                return (
                                    <div
                                        key={restName}
                                        onClick={() => {
                                            setSelectedRestaurant({ name: restName, ...restaurant });
                                            setCurrentScreen('restaurant');
                                        }}
                                        className="bg-white border border-aesop-sand p-6 hover:border-aesop-charcoal transition-all cursor-pointer"
                                    >
                                        <div className="flex items-start gap-5">
                                            <div className="w-20 h-20 border border-aesop-sand flex items-center justify-center flex-shrink-0">
                                                <Utensils />
                                            </div>
                                            <div className="flex-1">
                                                <div className="flex items-start justify-between mb-3">
                                                    <div>
                                                        <h3 className="text-xs tracking-widest uppercase text-aesop-black mb-2" style={{ letterSpacing: '1.5px', fontWeight: '600' }}>
                                                            {restName}
                                                        </h3>
                                                        <p className="text-xs text-aesop-taupe tracking-wide" style={{ letterSpacing: '0.5px' }}>
                                                            {restaurant.cuisine}
                                                        </p>
                                                    </div>
                                                    <ChevronRight />
                                                </div>
                                                <p className="text-xs text-aesop-brown mb-4 tracking-wide leading-relaxed" style={{ letterSpacing: '0.3px' }}>
                                                    {restaurant.description}
                                                </p>
                                                <div className="flex items-center gap-2">
                                                    <div className="px-3 py-2 border border-aesop-stone">
                                                        <span className="text-xs text-aesop-charcoal tracking-widest uppercase" style={{ letterSpacing: '0.5px', fontSize: '9px' }}>
                                                            {matchScore}% Match
                                                        </span>
                                                    </div>
                                                    <div className="px-3 py-2 border border-aesop-stone">
                                                        <span className="text-xs text-aesop-charcoal tracking-widest uppercase" style={{ letterSpacing: '0.5px', fontSize: '9px' }}>
                                                            {restaurant.items.length} Options
                                                        </span>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                );
                            })}
                        </div>
                    </div>
                </div>
            );

            // Restaurant Detail Screen
            const RestaurantScreen = () => {
                if (!selectedRestaurant) return null;

                return (
                    <div className="min-h-screen bg-aesop-cream pb-32">
                        <div className="max-w-2xl mx-auto">
                            {/* Header */}
                            <div className="bg-white border-b border-aesop-sand p-8">
                                <div className="flex items-center gap-5 mb-4">
                                    <button 
                                        onClick={() => {
                                            setSelectedRestaurant(null);
                                            setSelectedMeal(null);
                                            setCurrentScreen('restaurants');
                                        }}
                                        className="text-aesop-charcoal hover:text-aesop-black"
                                    >
                                        <ChevronLeft />
                                    </button>
                                    <div className="flex-1">
                                        <h1 className="text-2xl font-serif text-aesop-black tracking-tight mb-1">
                                            {selectedRestaurant.name}
                                        </h1>
                                        <p className="text-xs text-aesop-taupe tracking-wide" style={{ letterSpacing: '0.5px' }}>
                                            {selectedRestaurant.cuisine}
                                        </p>
                                    </div>
                                </div>
                            </div>

                            {/* Menu Items */}
                            <div className="p-8">
                                <h2 className="text-sm tracking-widest uppercase text-aesop-black mb-6" style={{ letterSpacing: '2px', fontWeight: '600' }}>
                                    Menu
                                </h2>
                                
                                <div className="space-y-4">
                                    {selectedRestaurant.items.map((meal, idx) => (
                                        <div key={idx} className="bg-white border border-aesop-sand overflow-hidden">
                                            <div className="p-6">
                                                <div 
                                                    onClick={() => {
                                                        setSelectedMeal(meal);
                                                        setExpandedMeal(expandedMeal === meal.name ? null : meal.name);
                                                    }}
                                                    className="cursor-pointer"
                                                >
                                                    <div className="flex items-start gap-5 mb-5">
                                                        <div className="w-16 h-16 border border-aesop-sand flex-shrink-0 flex items-center justify-center">
                                                            <Utensils />
                                                        </div>
                                                        <div className="flex-1">
                                                            <div className="flex items-start justify-between mb-3">
                                                                <h3 className="text-xs tracking-widest uppercase text-aesop-black" style={{ letterSpacing: '1.5px', fontWeight: '600' }}>
                                                                    {meal.name}
                                                                </h3>
                                                                <span className="text-sm font-serif text-aesop-black">
                                                                    ${meal.price.toFixed(2)}
                                                                </span>
                                                            </div>
                                                            {meal.recommended && (
                                                                <div className="inline-flex items-center gap-1 px-3 py-1 border border-aesop-stone mb-3">
                                                                    <span className="text-xs text-aesop-charcoal tracking-widest uppercase" style={{ letterSpacing: '0.5px', fontSize: '9px' }}>
                                                                        Recommended
                                                                    </span>
                                                                </div>
                                                            )}
                                                            <div className="flex items-center gap-3 text-xs text-aesop-taupe tracking-wide" style={{ letterSpacing: '0.5px' }}>
                                                                <span>{meal.calories} cal</span>
                                                                <span>·</span>
                                                                <span>{meal.protein}g protein</span>
                                                            </div>
                                                        </div>
                                                    </div>

                                                    {/* Macros */}
                                                    <div className="grid grid-cols-4 gap-4 mb-5">
                                                        <div className="text-center p-3 border border-aesop-sand">
                                                            <div className="text-sm font-serif text-aesop-black mb-1">
                                                                {meal.calories}
                                                            </div>
                                                            <div className="text-xs text-aesop-taupe tracking-widest uppercase" style={{ letterSpacing: '0.5px', fontSize: '9px' }}>
                                                                cal
                                                            </div>
                                                        </div>
                                                        <div className="text-center p-3 border border-aesop-sand">
                                                            <div className="text-sm font-serif text-aesop-black mb-1">
                                                                {meal.protein}g
                                                            </div>
                                                            <div className="text-xs text-aesop-taupe tracking-widest uppercase" style={{ letterSpacing: '0.5px', fontSize: '9px' }}>
                                                                protein
                                                            </div>
                                                        </div>
                                                        <div className="text-center p-3 border border-aesop-sand">
                                                            <div className="text-sm font-serif text-aesop-black mb-1">
                                                                {meal.carbs}g
                                                            </div>
                                                            <div className="text-xs text-aesop-taupe tracking-widest uppercase" style={{ letterSpacing: '0.5px', fontSize: '9px' }}>
                                                                carbs
                                                            </div>
                                                        </div>
                                                        <div className="text-center p-3 border border-aesop-sand">
                                                            <div className="text-sm font-serif text-aesop-black mb-1">
                                                                {meal.fat}g
                                                            </div>
                                                            <div className="text-xs text-aesop-taupe tracking-widest uppercase" style={{ letterSpacing: '0.5px', fontSize: '9px' }}>
                                                                fat
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>

                                                {/* Expanded Details */}
                                                {expandedMeal === meal.name && (
                                                    <div className="pt-6 border-t border-aesop-sand space-y-6">
                                                        {/* Ingredients */}
                                                        <div>
                                                            <div className="text-xs text-aesop-charcoal mb-3 uppercase tracking-widest" style={{ letterSpacing: '1.5px', fontWeight: '600' }}>
                                                                Ingredients
                                                            </div>
                                                            <div className="flex flex-wrap gap-2">
                                                                {meal.ingredients.map((ing, idx) => (
                                                                    <span key={idx} className="ingredient-tag">
                                                                        {ing}
                                                                    </span>
                                                                ))}
                                                            </div>
                                                        </div>

                                                        {/* Allergens */}
                                                        {meal.allergens && meal.allergens.length > 0 && (
                                                            <div>
                                                                <div className="text-xs text-aesop-charcoal mb-3 uppercase tracking-widest" style={{ letterSpacing: '1.5px', fontWeight: '600' }}>
                                                                    Allergens
                                                                </div>
                                                                <div className="text-xs text-aesop-brown bg-aesop-sand border border-aesop-stone px-4 py-3 tracking-wide" style={{ letterSpacing: '0.3px' }}>
                                                                    Contains: {meal.allergens.join(', ')}
                                                                </div>
                                                            </div>
                                                        )}

                                                        {/* Health Score */}
                                                        <div className="bg-aesop-sand border border-aesop-stone px-5 py-4">
                                                            <div className="flex items-center justify-between mb-3">
                                                                <span className="text-xs text-aesop-charcoal uppercase tracking-widest" style={{ letterSpacing: '1.5px', fontWeight: '600' }}>
                                                                    Health Score
                                                                </span>
                                                                <span className="text-lg font-serif text-aesop-black">
                                                                    {meal.healthScore}/100
                                                                </span>
                                                            </div>
                                                            <div className="h-px bg-aesop-stone overflow-hidden">
                                                                <div 
                                                                    className="h-full bg-accent-olive" 
                                                                    style={{ width: `${meal.healthScore}%` }}
                                                                />
                                                            </div>
                                                        </div>

                                                        {/* Action Buttons */}
                                                        <div className="grid grid-cols-2 gap-3 pt-2">
                                                            <button
                                                                onClick={(e) => {
                                                                    e.stopPropagation();
                                                                    setTrackedMeals([...trackedMeals, meal]);
                                                                    alert('Meal logged successfully');
                                                                }}
                                                                className="py-4 border border-aesop-charcoal text-aesop-black text-xs uppercase tracking-widest hover:bg-aesop-black hover:text-white transition-all"
                                                                style={{ letterSpacing: '1.5px', fontWeight: '500' }}
                                                            >
                                                                Log Meal
                                                            </button>
                                                            <button
                                                                onClick={(e) => {
                                                                    e.stopPropagation();
                                                                    openDoorDash(selectedRestaurant.name, meal.name);
                                                                }}
                                                                className="py-4 bg-aesop-black text-white text-xs uppercase tracking-widest hover:bg-aesop-charcoal transition-all"
                                                                style={{ letterSpacing: '1.5px', fontWeight: '500' }}
                                                            >
                                                                Order
                                                            </button>
                                                        </div>
                                                    </div>
                                                )}
                                            </div>
                                        </div>
                                    ))}
                                </div>
                            </div>
                        </div>
                    </div>
                );
            };

            // Track Screen
            const TrackScreen = () => (
                <div className="min-h-screen bg-aesop-cream pb-24">
                    <div className="max-w-2xl mx-auto p-8">
                        <h1 className="text-3xl font-serif text-aesop-black mb-2 tracking-tight">Track</h1>
                        <p className="text-xs text-aesop-taupe tracking-wide mb-8" style={{ letterSpacing: '0.5px' }}>
                            Daily nutrition overview
                        </p>

                        {/* Daily Progress */}
                        <div className="bg-white border border-aesop-sand p-8 mb-8">
                            <h2 className="text-sm tracking-widest uppercase text-aesop-black mb-6" style={{ letterSpacing: '2px', fontWeight: '600' }}>
                                Today's Progress
                            </h2>
                            
                            <div className="space-y-5">
                                {/* Calories */}
                                <div>
                                    <div className="flex justify-between items-center mb-2">
                                        <span className="text-xs text-aesop-charcoal tracking-widest uppercase" style={{ letterSpacing: '1px' }}>
                                            Calories
                                        </span>
                                        <span className="text-xs font-serif text-aesop-black">
                                            {dailyStats.calories} / {dailyStats.target.calories}
                                        </span>
                                    </div>
                                    <div className="h-px bg-aesop-sand overflow-hidden">
                                        <div 
                                            className="h-full bg-aesop-charcoal transition-all"
                                            style={{ width: `${Math.min((dailyStats.calories / dailyStats.target.calories) * 100, 100)}%` }}
                                        />
                                    </div>
                                </div>

                                {/* Protein */}
                                <div>
                                    <div className="flex justify-between items-center mb-2">
                                        <span className="text-xs text-aesop-charcoal tracking-widest uppercase" style={{ letterSpacing: '1px' }}>
                                            Protein
                                        </span>
                                        <span className="text-xs font-serif text-aesop-black">
                                            {dailyStats.protein}g / {dailyStats.target.protein}g
                                        </span>
                                    </div>
                                    <div className="h-px bg-aesop-sand overflow-hidden">
                                        <div 
                                            className="h-full bg-accent-olive transition-all"
                                            style={{ width: `${Math.min((dailyStats.protein / dailyStats.target.protein) * 100, 100)}%` }}
                                        />
                                    </div>
                                </div>

                                {/* Carbs */}
                                <div>
                                    <div className="flex justify-between items-center mb-2">
                                        <span className="text-xs text-aesop-charcoal tracking-widest uppercase" style={{ letterSpacing: '1px' }}>
                                            Carbs
                                        </span>
                                        <span className="text-xs font-serif text-aesop-black">
                                            {dailyStats.carbs}g / {dailyStats.target.carbs}g
                                        </span>
                                    </div>
                                    <div className="h-px bg-aesop-sand overflow-hidden">
                                        <div 
                                            className="h-full bg-aesop-taupe transition-all"
                                            style={{ width: `${Math.min((dailyStats.carbs / dailyStats.target.carbs) * 100, 100)}%` }}
                                        />
                                    </div>
                                </div>

                                {/* Fat */}
                                <div>
                                    <div className="flex justify-between items-center mb-2">
                                        <span className="text-xs text-aesop-charcoal tracking-widest uppercase" style={{ letterSpacing: '1px' }}>
                                            Fat
                                        </span>
                                        <span className="text-xs font-serif text-aesop-black">
                                            {dailyStats.fat}g / {dailyStats.target.fat}g
                                        </span>
                                    </div>
                                    <div className="h-px bg-aesop-sand overflow-hidden">
                                        <div 
                                            className="h-full bg-aesop-charcoal transition-all"
                                            style={{ width: `${Math.min((dailyStats.fat / dailyStats.target.fat) * 100, 100)}%` }}
                                        />
                                    </div>
                                </div>
                            </div>
                        </div>

                        {/* Logged Meals */}
                        <div className="mb-8">
                            <h2 className="text-sm tracking-widest uppercase text-aesop-black mb-6" style={{ letterSpacing: '2px', fontWeight: '600' }}>
                                Logged Meals
                            </h2>
                            
                            {trackedMeals.length === 0 ? (
                                <div className="bg-white border border-aesop-sand p-12 text-center">
                                    <div className="mb-4">
                                        <Utensils />
                                    </div>
                                    <p className="text-xs text-aesop-taupe tracking-wide mb-6" style={{ letterSpacing: '0.5px' }}>
                                        No meals logged today
                                    </p>
                                    <button
                                        onClick={() => setCurrentScreen('restaurants')}
                                        className="px-8 py-3 bg-aesop-black text-white text-xs uppercase tracking-widest hover:bg-aesop-charcoal"
                                        style={{ letterSpacing: '1.5px', fontWeight: '500' }}
                                    >
                                        Browse Restaurants
                                    </button>
                                </div>
                            ) : (
                                <div className="space-y-3">
                                    {trackedMeals.map((meal, idx) => (
                                        <div key={idx} className="bg-white border border-aesop-sand p-5">
                                            <div className="flex items-center gap-4">
                                                <div className="w-12 h-12 border border-aesop-sand flex items-center justify-center flex-shrink-0">
                                                    <Utensils />
                                                </div>
                                                <div className="flex-1">
                                                    <h3 className="text-xs tracking-widest uppercase text-aesop-black mb-2" style={{ letterSpacing: '1.5px', fontWeight: '600' }}>
                                                        {meal.name}
                                                    </h3>
                                                    <div className="flex items-center gap-2 text-xs text-aesop-taupe tracking-wide" style={{ letterSpacing: '0.5px' }}>
                                                        <span>{meal.calories} cal</span>
                                                        <span>·</span>
                                                        <span>{meal.protein}g protein</span>
                                                    </div>
                                                </div>
                                                <button
                                                    onClick={() => {
                                                        setTrackedMeals(trackedMeals.filter((_, i) => i !== idx));
                                                    }}
                                                    className="text-aesop-taupe hover:text-aesop-black"
                                                >
                                                    <X />
                                                </button>
                                            </div>
                                        </div>
                                    ))}
                                </div>
                            )}
                        </div>

                        {/* Quick Add Button */}
                        <button
                            onClick={() => setCurrentScreen('restaurants')}
                            className="w-full py-4 bg-aesop-black text-white text-xs uppercase tracking-widest hover:bg-aesop-charcoal flex items-center justify-center gap-3"
                            style={{ letterSpacing: '1.5px', fontWeight: '500' }}
                        >
                            <Plus />
                            <span>Add Meal</span>
                        </button>
                    </div>
                </div>
            );

            // Insights Screen
            const InsightsScreen = () => (
                <div className="min-h-screen bg-aesop-cream pb-24">
                    <div className="max-w-2xl mx-auto p-8">
                        <h1 className="text-3xl font-serif text-aesop-black mb-2 tracking-tight">Insights</h1>
                        <p className="text-xs text-aesop-taupe tracking-wide mb-8" style={{ letterSpacing: '0.5px' }}>
                            Personalized recommendations based on your health data
                        </p>

                        <div className="space-y-4">
                            {/* Cycle Insight */}
                            <div className="bg-white border border-aesop-sand p-8">
                                <div className="flex items-start gap-4 mb-5">
                                    <div className="flex-shrink-0">
                                        <Calendar />
                                    </div>
                                    <div className="flex-1">
                                        <h3 className="text-sm tracking-widest uppercase text-aesop-black mb-3" style={{ letterSpacing: '1.5px', fontWeight: '600' }}>
                                            Cycle-Synced Nutrition
                                        </h3>
                                        <p className="text-xs text-aesop-brown leading-relaxed tracking-wide mb-4" style={{ letterSpacing: '0.3px' }}>
                                            You are in your follicular phase (Day 8). Your body demonstrates increased 
                                            insulin sensitivity and naturally elevated energy levels. Optimal period for:
                                        </p>
                                        <ul className="space-y-2 text-xs text-aesop-brown tracking-wide" style={{ letterSpacing: '0.3px' }}>
                                            <li className="flex items-start gap-3">
                                                <span className="text-aesop-charcoal mt-0.5">·</span>
                                                <span>Lean proteins and complex carbohydrates</span>
                                            </li>
                                            <li className="flex items-start gap-3">
                                                <span className="text-aesop-charcoal mt-0.5">·</span>
                                                <span>Higher-intensity physical training</span>
                                            </li>
                                            <li className="flex items-start gap-3">
                                                <span className="text-aesop-charcoal mt-0.5">·</span>
                                                <span>Increased portion sizes if required</span>
                                            </li>
                                        </ul>
                                    </div>
                                </div>
                                <div className="flex items-center gap-2 text-xs">
                                    <span className="px-3 py-2 border border-aesop-stone text-aesop-charcoal tracking-widest uppercase" style={{ letterSpacing: '1px', fontSize: '9px' }}>
                                        Follicular Phase
                                    </span>
                                    <span className="px-3 py-2 border border-aesop-stone text-aesop-charcoal tracking-widest uppercase" style={{ letterSpacing: '1px', fontSize: '9px' }}>
                                        Day 8/28
                                    </span>
                                </div>
                            </div>

                            {/* Sleep Insight */}
                            <div className="bg-white border border-aesop-sand p-8">
                                <div className="flex items-start gap-4 mb-5">
                                    <div className="flex-shrink-0">
                                        <Activity />
                                    </div>
                                    <div className="flex-1">
                                        <h3 className="text-sm tracking-widest uppercase text-aesop-black mb-3" style={{ letterSpacing: '1.5px', fontWeight: '600' }}>
                                            Sleep & Recovery
                                        </h3>
                                        <p className="text-xs text-aesop-brown leading-relaxed tracking-wide mb-4" style={{ letterSpacing: '0.3px' }}>
                                            Sleep score: 82. Recovery is optimal. Your body is prepared for 
                                            balanced nutritional intake throughout the day.
                                        </p>
                                        <div className="bg-aesop-sand border border-aesop-stone p-4">
                                            <p className="text-xs text-aesop-brown tracking-wide leading-relaxed" style={{ letterSpacing: '0.3px' }}>
                                                Consider a protein-rich meal within one hour of waking to stabilize 
                                                blood glucose and maintain optimal energy levels.
                                            </p>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            {/* HRV Insight */}
                            <div className="bg-white border border-aesop-sand p-8">
                                <div className="flex items-start gap-4 mb-5">
                                    <div className="flex-shrink-0">
                                        <TrendingUp />
                                    </div>
                                    <div className="flex-1">
                                        <h3 className="text-sm tracking-widest uppercase text-aesop-black mb-3" style={{ letterSpacing: '1.5px', fontWeight: '600' }}>
                                            Recovery Status
                                        </h3>
                                        <p className="text-xs text-aesop-brown leading-relaxed tracking-wide mb-4" style={{ letterSpacing: '0.3px' }}>
                                            Readiness: 85%. HRV: 68ms. Your body is in optimal recovery mode.
                                        </p>
                                        <div className="space-y-2 text-xs text-aesop-brown tracking-wide" style={{ letterSpacing: '0.3px' }}>
                                            <div className="flex items-start gap-3">
                                                <span className="text-accent-olive mt-0.5">✓</span>
                                                <span>Body can accommodate normal training intensity</span>
                                            </div>
                                            <div className="flex items-start gap-3">
                                                <span className="text-accent-olive mt-0.5">✓</span>
                                                <span>Maintain regular macronutrient targets</span>
                                            </div>
                                            <div className="flex items-start gap-3">
                                                <span className="text-accent-olive mt-0.5">✓</span>
                                                <span>Post-workout: 20-30g protein within two hours</span>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            {/* Weekly Trend */}
                            <div className="bg-white border border-aesop-sand p-8">
                                <div className="flex items-start gap-4 mb-5">
                                    <div className="flex-shrink-0">
                                        <BarChart />
                                    </div>
                                    <div className="flex-1">
                                        <h3 className="text-sm tracking-widest uppercase text-aesop-black mb-5" style={{ letterSpacing: '1.5px', fontWeight: '600' }}>
                                            Weekly Trends
                                        </h3>
                                        <div className="space-y-4">
                                            <div>
                                                <div className="flex justify-between items-center mb-2">
                                                    <span className="text-xs text-aesop-charcoal tracking-widest uppercase" style={{ letterSpacing: '1px' }}>
                                                        Average Calories
                                                    </span>
                                                    <span className="text-xs font-serif text-aesop-black">
                                                        1,650 / day
                                                    </span>
                                                </div>
                                                <div className="text-xs text-accent-olive tracking-wide" style={{ letterSpacing: '0.3px' }}>
                                                    ↑ 5% from last week
                                                </div>
                                            </div>
                                            <div>
                                                <div className="flex justify-between items-center mb-2">
                                                    <span className="text-xs text-aesop-charcoal tracking-widest uppercase" style={{ letterSpacing: '1px' }}>
                                                        Average Protein
                                                    </span>
                                                    <span className="text-xs font-serif text-aesop-black">
                                                        102g / day
                                                    </span>
                                                </div>
                                                <div className="text-xs text-aesop-brown tracking-wide" style={{ letterSpacing: '0.3px' }}>
                                                    ↓ 8% — Consider slight increase
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            {/* Recommendation */}
                            <div className="bg-aesop-sand border border-aesop-stone p-8">
                                <div className="flex items-start gap-4">
                                    <div className="flex-shrink-0">
                                        <Sparkles />
                                    </div>
                                    <div className="flex-1">
                                        <h3 className="text-sm tracking-widest uppercase text-aesop-black mb-3" style={{ letterSpacing: '1.5px', fontWeight: '600' }}>
                                            Recommendation
                                        </h3>
                                        <p className="text-xs text-aesop-brown leading-relaxed tracking-wide mb-5" style={{ letterSpacing: '0.3px' }}>
                                            Based on your follicular phase and optimal recovery status, the 
                                            Harvest Bowl from Sweetgreen is recommended for today's lunch. 
                                            Provides balanced protein (18g) and complex carbohydrates (68g) 
                                            to support elevated energy levels.
                                        </p>
                                        <button
                                            onClick={() => setCurrentScreen('restaurants')}
                                            className="px-6 py-3 bg-aesop-black text-white text-xs uppercase tracking-widest hover:bg-aesop-charcoal"
                                            style={{ letterSpacing: '1.5px', fontWeight: '500' }}
                                        >
                                            View Recommendation
                                        </button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            );

            // Bottom Navigation
            const BottomNav = ({ current, onNavigate }) => (
                <div className="fixed bottom-0 left-0 right-0 bg-white border-t border-aesop-sand z-50">
                    <div className="max-w-2xl mx-auto">
                        <div className="grid grid-cols-4 gap-2 p-6">
                            <button
                                onClick={() => onNavigate('home')}
                                className={`flex flex-col items-center gap-2 transition-colors ${
                                    current === 'home' ? 'text-aesop-black' : 'text-aesop-taupe'
                                }`}
                            >
                                <Home />
                                <span className="text-xs tracking-widest uppercase" style={{ letterSpacing: '0.5px', fontSize: '9px' }}>
                                    Home
                                </span>
                            </button>
                            <button
                                onClick={() => onNavigate('restaurants')}
                                className={`flex flex-col items-center gap-2 transition-colors ${
                                    current === 'restaurants' ? 'text-aesop-black' : 'text-aesop-taupe'
                                }`}
                            >
                                <Search />
                                <span className="text-xs tracking-widest uppercase" style={{ letterSpacing: '0.5px', fontSize: '9px' }}>
                                    Browse
                                </span>
                            </button>
                            <button
                                onClick={() => onNavigate('track')}
                                className={`flex flex-col items-center gap-2 transition-colors ${
                                    current === 'track' ? 'text-aesop-black' : 'text-aesop-taupe'
                                }`}
                            >
                                <BarChart />
                                <span className="text-xs tracking-widest uppercase" style={{ letterSpacing: '0.5px', fontSize: '9px' }}>
                                    Track
                                </span>
                            </button>
                            <button
                                onClick={() => onNavigate('insights')}
                                className={`flex flex-col items-center gap-2 transition-colors ${
                                    current === 'insights' ? 'text-aesop-black' : 'text-aesop-taupe'
                                }`}
                            >
                                <Sparkles />
                                <span className="text-xs tracking-widest uppercase" style={{ letterSpacing: '0.5px', fontSize: '9px' }}>
                                    Insights
                                </span>
                            </button>
                        </div>
                    </div>
                </div>
            );

            // Main Router
            const screens = {
                splash: <SplashScreen />,
                onboarding: <OnboardingScreen />,
                wearable: <WearableScreen />,
                home: <HomeScreen />,
                restaurants: <RestaurantsScreen />,
                restaurant: <RestaurantScreen />,
                track: <TrackScreen />,
                insights: <InsightsScreen />
            };

            const showBottomNav = ['home', 'restaurants', 'track', 'insights'].includes(currentScreen);

            return (
                <div className="min-h-screen bg-aesop-cream">
                    {screens[currentScreen]}
                    {showBottomNav && (
                        <BottomNav 
                            current={currentScreen} 
                            onNavigate={setCurrentScreen}
                        />
                    )}
                </div>
            );
        }

        ReactDOM.render(<CirceNutritionApp />, document.getElementById('root'));
    </script>
</body>
</html>
